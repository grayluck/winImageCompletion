\documentclass[a4paper,article,indent]{ctexart}

%\usepackage{ctex}
\usepackage{algorithm}
\usepackage{algorithmic}
%\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{float}
\usepackage{enumitem}
\usepackage{titlesec}
\usepackage{multirow}
\usepackage{longtable}
\usepackage{geometry}
\setlength{\parindent}{2em}
\graphicspath{{chapter/}{Images/}}

\geometry{left=3cm,right=2.5cm,top=2.5cm,bottom=2.5cm}

\begin{document}

%\setlength{\topmargin}{0cm}
%\setlength{\footskip}{0cm}
\begin{titlepage}
\title{\heiti 图像补全}
\author{清华大学 计22班\\章彦恺\\2012011284}
\end{titlepage}
\maketitle

\CTEXsetup[format+={\flushleft}]{section}

\newpage

\section{基于模板的图像补全}

	设等待补全的像素集合为$\Omega$，已有像素信息为$\Phi$，当前图像的已补全边界表示为$\partial\Omega$，模板的大小为$\Psi$。算法通过计算出每个在边界上的未填充像素的\emph{优先度}，根据优先度的顺序依次对象素进行填充。
	
	在计算优先度的过程中，算法考虑的因素有：
	
	\begin{enumerate}
		\item 在明显的内容的边界上
		\item 被置信度高的像素所包围
	\end{enumerate}
	
	于是得到对于像素$p\in\partial\Omega$为中心节点的块$\Psi p$，定义$p$的优先度$P(p)$为：
	
	\begin{center}
		$P(p)=C(p)D(p)$
	\end{center}
	
	其中：
	
	\begin{center}
		$C(p)=\frac{\sum_{q\in\Psi_p\bigcap\Phi} c(q)}{|\Psi_p|};$
		$D(p)=\frac{\nabla I_p^\bot\cdot n_p}{\alpha}$
	\end{center}
	
	式中$I_p$为使用Sobel算子获得的二维坐标中像素点的梯度方向。对于一个特定像素点$p$，其计算公式为：
	
	\begin{center}
	
		$I_x=(I(x+1, y+1)+2I(x, y+1)+I(x-1,y+1)-I(x+1,y-1)-2I(x,y-1)-I(x-1,y-1))/8$
		
		$I_y=(I(x+1, y+1)+2I(x+1, y)+I(x+1,y-1)-I(x-1,y+1)-2I(x-1,y)-I(x-1,y-1))/8$
		
		$\nabla I=\frac{(-I_y, I_x)}{\sqrt{I_x^2+I_y^2}}$
		
	\end{center}
	
	根据上面的定义与准则，基于模板的图像补全算法可以概括如下：
	
	\begin{enumerate}
		\item 如果$\partial\Omega^t=\emptyset$，那么算法终止
		\item 对于每个在边界上的像素$p\in\partial\Omega^t$，计算优先级
	\end{enumerate}

\end{document}
